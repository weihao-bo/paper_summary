<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoCoMo ä»£ç ä»“åº“æ¶æ„è¯¦è§£</title>
    <style>
        :root {
            --primary: #4F46E5;
            --primary-light: #818CF8;
            --secondary: #10B981;
            --warning: #F59E0B;
            --danger: #EF4444;
            --bg: #F9FAFB;
            --card-bg: #FFFFFF;
            --text: #1F2937;
            --text-muted: #6B7280;
            --border: #E5E7EB;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        header {
            text-align: center;
            margin-bottom: 60px;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subtitle {
            color: var(--text-muted);
            font-size: 1.1rem;
        }

        /* Navigation */
        .nav {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .nav a {
            padding: 12px 24px;
            background: var(--card-bg);
            border-radius: 8px;
            text-decoration: none;
            color: var(--text);
            font-weight: 500;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            transition: all 0.2s;
        }

        .nav a:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        /* Section Styles */
        section {
            margin-bottom: 60px;
        }

        .section-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .section-number {
            width: 48px;
            height: 48px;
            background: var(--primary);
            color: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: bold;
        }

        h2 {
            font-size: 1.75rem;
        }

        /* Card Styles */
        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            margin-bottom: 24px;
        }

        .card h3 {
            font-size: 1.25rem;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card h3 .icon {
            font-size: 1.5rem;
        }

        .card h4 {
            font-size: 1.1rem;
            margin: 20px 0 12px 0;
            color: var(--primary);
        }

        /* Flow Diagram */
        .flow-diagram {
            display: flex;
            flex-direction: column;
            gap: 24px;
            padding: 24px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 16px;
            margin-bottom: 24px;
        }

        .flow-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 16px;
            flex-wrap: wrap;
        }

        .flow-box {
            padding: 16px 24px;
            border-radius: 12px;
            font-weight: 500;
            text-align: center;
            min-width: 180px;
        }

        .flow-box.input {
            background: #DBEAFE;
            border: 2px solid #3B82F6;
            color: #1E40AF;
        }

        .flow-box.process {
            background: #FEF3C7;
            border: 2px solid #F59E0B;
            color: #92400E;
        }

        .flow-box.output {
            background: #D1FAE5;
            border: 2px solid #10B981;
            color: #065F46;
        }

        .flow-box.script {
            background: #EDE9FE;
            border: 2px solid #8B5CF6;
            color: #5B21B6;
            font-family: monospace;
            font-size: 0.9rem;
        }

        .flow-arrow {
            font-size: 1.5rem;
            color: var(--text-muted);
        }

        .flow-arrow.down {
            transform: rotate(90deg);
        }

        /* Code Block */
        .code-block {
            background: #1F2937;
            color: #E5E7EB;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.875rem;
            margin: 16px 0;
        }

        .code-block .comment {
            color: #9CA3AF;
        }

        .code-block .keyword {
            color: #F472B6;
        }

        .code-block .string {
            color: #34D399;
        }

        .code-block .function {
            color: #60A5FA;
        }

        /* Table Styles */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 16px 0;
        }

        th, td {
            padding: 12px 16px;
            text-align: left;
            border-bottom: 1px solid var(--border);
        }

        th {
            background: #F3F4F6;
            font-weight: 600;
        }

        tr:hover {
            background: #F9FAFB;
        }

        /* Badge */
        .badge {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .badge.green {
            background: #D1FAE5;
            color: #065F46;
        }

        .badge.yellow {
            background: #FEF3C7;
            color: #92400E;
        }

        .badge.blue {
            background: #DBEAFE;
            color: #1E40AF;
        }

        .badge.purple {
            background: #EDE9FE;
            color: #5B21B6;
        }

        .badge.red {
            background: #FEE2E2;
            color: #991B1B;
        }

        /* Grid Layout */
        .grid-2 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
        }

        .grid-3 {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }

        /* List Styles */
        .step-list {
            list-style: none;
            counter-reset: step;
        }

        .step-list li {
            counter-increment: step;
            padding: 12px 0 12px 48px;
            position: relative;
            border-left: 2px solid var(--border);
            margin-left: 16px;
        }

        .step-list li::before {
            content: counter(step);
            position: absolute;
            left: -17px;
            top: 10px;
            width: 32px;
            height: 32px;
            background: var(--primary);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.875rem;
        }

        .step-list li:last-child {
            border-left-color: transparent;
        }

        /* File Tree */
        .file-tree {
            font-family: monospace;
            font-size: 0.9rem;
            background: #F9FAFB;
            padding: 16px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .file-tree .folder {
            color: var(--primary);
            font-weight: 600;
        }

        .file-tree .file {
            color: var(--text);
        }

        .file-tree .desc {
            color: var(--text-muted);
            font-size: 0.8rem;
        }

        /* Highlight Box */
        .highlight-box {
            padding: 16px;
            border-radius: 8px;
            margin: 16px 0;
        }

        .highlight-box.info {
            background: #EFF6FF;
            border-left: 4px solid #3B82F6;
        }

        .highlight-box.warning {
            background: #FFFBEB;
            border-left: 4px solid #F59E0B;
        }

        .highlight-box.success {
            background: #ECFDF5;
            border-left: 4px solid #10B981;
        }

        /* Responsive */
        @media (max-width: 768px) {
            h1 {
                font-size: 1.75rem;
            }

            .grid-2, .grid-3 {
                grid-template-columns: 1fr;
            }

            .flow-row {
                flex-direction: column;
            }

            .flow-arrow {
                transform: rotate(90deg);
            }
        }

        /* JSON Preview */
        .json-preview {
            background: #1a1a2e;
            color: #eee;
            padding: 16px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: monospace;
            font-size: 0.8rem;
            max-height: 400px;
            overflow-y: auto;
        }

        .json-preview .key {
            color: #82aaff;
        }

        .json-preview .string {
            color: #c3e88d;
        }

        .json-preview .number {
            color: #f78c6c;
        }

        /* Main Flow Diagram */
        .main-flow {
            background: linear-gradient(180deg, #f8fafc 0%, #e2e8f0 100%);
            padding: 40px;
            border-radius: 20px;
            margin: 40px 0;
        }

        .main-flow-title {
            text-align: center;
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 32px;
            color: var(--primary);
        }

        .pipeline {
            display: flex;
            justify-content: space-between;
            align-items: stretch;
            gap: 24px;
            flex-wrap: wrap;
        }

        .pipeline-stage {
            flex: 1;
            min-width: 280px;
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
            position: relative;
        }

        .pipeline-stage::after {
            content: 'â†’';
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2rem;
            color: var(--primary);
        }

        .pipeline-stage:last-child::after {
            display: none;
        }

        .pipeline-stage h4 {
            text-align: center;
            padding: 8px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .pipeline-stage.produce h4 {
            background: #DBEAFE;
            color: #1E40AF;
        }

        .pipeline-stage.transform h4 {
            background: #FEF3C7;
            color: #92400E;
        }

        .pipeline-stage.evaluate h4 {
            background: #D1FAE5;
            color: #065F46;
        }

        .pipeline-item {
            padding: 8px 12px;
            margin: 8px 0;
            border-radius: 6px;
            font-size: 0.9rem;
            background: #f8fafc;
            border: 1px solid #e2e8f0;
        }

        .pipeline-item code {
            font-size: 0.8rem;
            color: var(--primary);
        }

        @media (max-width: 1024px) {
            .pipeline {
                flex-direction: column;
            }

            .pipeline-stage::after {
                content: 'â†“';
                right: 50%;
                top: auto;
                bottom: -24px;
                transform: translateX(50%);
            }

            .pipeline-stage {
                margin-bottom: 24px;
            }
        }

        /* Example Box */
        .example-box {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #c084fc;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
        }

        .example-box .example-title {
            font-weight: bold;
            color: #7c3aed;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Conversation bubble */
        .conversation {
            background: #f8fafc;
            border-radius: 12px;
            padding: 16px;
            margin: 12px 0;
        }

        .conversation .turn {
            margin: 8px 0;
            padding: 10px 14px;
            border-radius: 12px;
            max-width: 85%;
        }

        .conversation .turn.speaker-a {
            background: #dbeafe;
            margin-right: auto;
        }

        .conversation .turn.speaker-b {
            background: #dcfce7;
            margin-left: auto;
        }

        .conversation .speaker-name {
            font-weight: 600;
            font-size: 0.85rem;
            margin-bottom: 4px;
        }

        .conversation .turn.speaker-a .speaker-name {
            color: #1e40af;
        }

        .conversation .turn.speaker-b .speaker-name {
            color: #166534;
        }

        .conversation .image-share {
            background: #fef3c7;
            border: 1px dashed #f59e0b;
            padding: 8px;
            border-radius: 8px;
            margin-top: 8px;
            font-size: 0.85rem;
            color: #92400e;
        }

        .conversation .timestamp {
            text-align: center;
            color: #6b7280;
            font-size: 0.8rem;
            margin: 16px 0 8px 0;
            padding: 4px 12px;
            background: #e5e7eb;
            border-radius: 12px;
            display: inline-block;
            width: 100%;
        }

        /* Transform arrow */
        .transform-arrow {
            text-align: center;
            font-size: 2rem;
            color: var(--primary);
            margin: 16px 0;
        }

        /* Prompt box */
        .prompt-box {
            background: #fffbeb;
            border: 1px solid #fbbf24;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
            font-family: monospace;
            font-size: 0.85rem;
            white-space: pre-wrap;
        }

        .prompt-box .label {
            background: #fbbf24;
            color: #78350f;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.75rem;
            margin-bottom: 8px;
            display: inline-block;
        }

        /* Result box */
        .result-box {
            background: #ecfdf5;
            border: 1px solid #10b981;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
        }

        .result-box .label {
            background: #10b981;
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.75rem;
            margin-bottom: 8px;
            display: inline-block;
        }

        /* Calculation steps */
        .calc-steps {
            background: #f8fafc;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
        }

        .calc-steps .step {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 0;
            border-bottom: 1px dashed #e5e7eb;
        }

        .calc-steps .step:last-child {
            border-bottom: none;
        }

        .calc-steps .step-num {
            background: var(--primary);
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: bold;
            flex-shrink: 0;
        }

        /* Retrieval visualization */
        .retrieval-viz {
            background: #f0f9ff;
            border-radius: 12px;
            padding: 16px;
            margin: 12px 0;
        }

        .retrieval-viz .query {
            background: #3b82f6;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            margin-bottom: 12px;
        }

        .retrieval-viz .results {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .retrieval-viz .result-item {
            display: flex;
            align-items: center;
            gap: 12px;
            background: white;
            padding: 8px 12px;
            border-radius: 8px;
            border: 1px solid #e5e7eb;
        }

        .retrieval-viz .result-item .rank {
            background: #dbeafe;
            color: #1e40af;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
            font-size: 0.75rem;
        }

        .retrieval-viz .result-item .score {
            color: #059669;
            font-weight: 600;
            font-size: 0.85rem;
            margin-left: auto;
        }

        .retrieval-viz .result-item.hit {
            border-color: #10b981;
            background: #ecfdf5;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>LoCoMo ä»£ç ä»“åº“æ¶æ„è¯¦è§£</h1>
            <p class="subtitle">Evaluating Very Long-Term Conversational Memory of LLM Agents (ACL 2024)</p>
        </header>

        <nav class="nav">
            <a href="#overview">æ€»è§ˆ</a>
            <a href="#data-production">æ•°æ®ç”Ÿäº§</a>
            <a href="#data-example">ç”Ÿäº§ç¤ºä¾‹</a>
            <a href="#intermediate">ä¸­é—´äº§ç‰©</a>
            <a href="#evaluation">æµ‹è¯„ä½¿ç”¨</a>
            <a href="#eval-example">æµ‹è¯„ç¤ºä¾‹</a>
            <a href="#metrics">æŒ‡æ ‡è®¡ç®—</a>
        </nav>

        <!-- Overview Section -->
        <section id="overview">
            <div class="section-header">
                <div class="section-number">0</div>
                <h2>å®Œæ•´æµç¨‹æ€»è§ˆ</h2>
            </div>

            <div class="main-flow">
                <div class="main-flow-title">æ•°æ®ç”Ÿäº§ â†’ ä¸­é—´äº§ç‰© â†’ æµ‹è¯„ä½¿ç”¨</div>
                <div class="pipeline">
                    <div class="pipeline-stage produce">
                        <h4>ğŸ“¦ æ•°æ®ç”Ÿäº§</h4>
                        <div class="pipeline-item">
                            <strong>å·²å‘å¸ƒåŸºå‡†</strong><br>
                            <code>data/locomo10.json</code>
                        </div>
                        <div class="pipeline-item">
                            <strong>ç”Ÿæˆæ–°å¯¹è¯</strong><br>
                            <code>scripts/generate_conversations.sh</code>
                        </div>
                        <div class="pipeline-item" style="background: #fef3c7; border-color: #f59e0b;">
                            Persona â†’ äº‹ä»¶å›¾è°± â†’ å¤šè½®å¯¹è¯ â†’ å›¾ç‰‡Caption
                        </div>
                    </div>

                    <div class="pipeline-stage transform">
                        <h4>ğŸ”„ ä¸­é—´äº§ç‰© (RAGåº“)</h4>
                        <div class="pipeline-item">
                            <strong>Observation åº“</strong><br>
                            <code>generate_observations.sh</code>
                        </div>
                        <div class="pipeline-item">
                            <strong>Session Summary åº“</strong><br>
                            <code>generate_session_summaries.sh</code>
                        </div>
                        <div class="pipeline-item">
                            <strong>Dialog åº“</strong><br>
                            <code>gpt_utils.prepare_for_rag()</code>
                        </div>
                    </div>

                    <div class="pipeline-stage evaluate">
                        <h4>ğŸ“Š æµ‹è¯„ä½¿ç”¨</h4>
                        <div class="pipeline-item">
                            <strong>çº¯ä¸Šä¸‹æ–‡ QA</strong><br>
                            <code>evaluate_gpts/claude/gemini.sh</code>
                        </div>
                        <div class="pipeline-item">
                            <strong>RAG å¢å¼º QA</strong><br>
                            <code>evaluate_rag_gpts.sh</code>
                        </div>
                        <div class="pipeline-item" style="background: #d1fae5; border-color: #10b981;">
                            F1 Score / Recall / åˆ†ç±»ç»Ÿè®¡
                        </div>
                    </div>
                </div>
            </div>

            <div class="highlight-box info">
                <strong>ğŸ’¡ å…³é”®åŒºåˆ†</strong><br>
                <code>data/locomo10.json</code> æ˜¯è®ºæ–‡å‘å¸ƒçš„åŸºå‡†æ•°æ®é›†ï¼ˆ10æ®µè¶…é•¿å¯¹è¯+æ ‡æ³¨ï¼‰ï¼Œä¸æ˜¯è¿è¡Œæ—¶ç”Ÿæˆçš„ã€‚<br>
                <code>generative_agents/</code> ç›®å½•çš„ä»£ç ç”¨äºç”Ÿæˆ<strong>æ–°çš„</strong>åˆæˆå¯¹è¯æ•°æ®ã€‚
            </div>
        </section>

        <!-- Data Production Section -->
        <section id="data-production">
            <div class="section-header">
                <div class="section-number">1</div>
                <h2>æ•°æ®ç”Ÿäº§æµç¨‹</h2>
            </div>

            <div class="card">
                <h3><span class="icon">âš™ï¸</span> å¯¹è¯ç”Ÿæˆ 5 æ­¥æµç¨‹</h3>

                <div class="flow-diagram">
                    <div class="flow-row">
                        <div class="flow-box input">MSC Persona<br><small>å‡ å¥è¯çš„äººè®¾</small></div>
                        <span class="flow-arrow">â†’</span>
                        <div class="flow-box process">GPT æ‰©å±•<br><small>--persona</small></div>
                        <span class="flow-arrow">â†’</span>
                        <div class="flow-box output">å®Œæ•´ Persona<br><small>agent_a/b.json</small></div>
                    </div>
                    <div style="text-align: center;"><span class="flow-arrow" style="transform: rotate(90deg);">â†“</span></div>
                    <div class="flow-row">
                        <div class="flow-box output">Persona</div>
                        <span class="flow-arrow">â†’</span>
                        <div class="flow-box process">GPT ç”Ÿæˆ<br><small>--events</small></div>
                        <span class="flow-arrow">â†’</span>
                        <div class="flow-box output">äº‹ä»¶å›¾è°±<br><small>å«å› æœé“¾ã€æ—¶é—´çº¿</small></div>
                    </div>
                    <div style="text-align: center;"><span class="flow-arrow" style="transform: rotate(90deg);">â†“</span></div>
                    <div class="flow-row">
                        <div class="flow-box output">Persona + äº‹ä»¶</div>
                        <span class="flow-arrow">â†’</span>
                        <div class="flow-box process">Agent è½®æµå¯¹è¯<br><small>--session</small></div>
                        <span class="flow-arrow">â†’</span>
                        <div class="flow-box output">å¤šè½®å¯¹è¯<br><small>session_1, session_2...</small></div>
                    </div>
                    <div style="text-align: center;"><span class="flow-arrow" style="transform: rotate(90deg);">â†“</span></div>
                    <div class="flow-row">
                        <div class="flow-box input">å›¾ç‰‡æœç´¢ Query</div>
                        <span class="flow-arrow">â†’</span>
                        <div class="flow-box process">icrawler + BLIP<br><small>--blip-caption</small></div>
                        <span class="flow-arrow">â†’</span>
                        <div class="flow-box output">å›¾ç‰‡ + Caption<br><small>blip_caption å­—æ®µ</small></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Data Production Example -->
        <section id="data-example">
            <div class="section-header">
                <div class="section-number">ğŸ“</div>
                <h2>æ•°æ®ç”Ÿäº§å…·ä½“ç¤ºä¾‹</h2>
            </div>

            <!-- Step 1: Persona -->
            <div class="card">
                <h3><span class="icon">ğŸ‘¤</span> æ­¥éª¤ 1ï¼šPersona ç”Ÿæˆ</h3>

                <div class="example-box">
                    <div class="example-title">ğŸ” å…·ä½“ä¾‹å­ï¼šä» MSC ç®€çŸ­äººè®¾ â†’ å®Œæ•´äººæ ¼æè¿°</div>

                    <h4>è¾“å…¥ï¼šMSC åŸå§‹ personaï¼ˆå‡ å¥è¯ï¼‰</h4>
                    <div class="json-preview" style="max-height: 100px;">
[
  "I like to paint in my free time",
  "I have two kids",
  "I enjoy camping with my family",
  "I work part-time at a gift shop"
]
                    </div>

                    <div class="transform-arrow">â¬‡ï¸ GPT + PERSONA_FROM_MSC_PROMPT</div>

                    <h4>è¾“å‡ºï¼šå®Œæ•´ persona_summary</h4>
                    <div class="json-preview" style="max-height: 150px;">
{
  <span class="key">"name"</span>: <span class="string">"Melanie"</span>,
  <span class="key">"persona_summary"</span>: <span class="string">"Melanie is a 35 year old mother of two who works part-time at a local gift shop. She is passionate about art and spends her free time painting landscapes and nature scenes. She loves outdoor activities, especially camping trips with her family to various national parks. She values quality time with her children and often takes them to museums and parks."</span>
}
                    </div>
                </div>

                <div class="highlight-box info">
                    <strong>ä»£ç ä½ç½®</strong>ï¼š<code>generative_agents/conversation_utils.py</code> ä¸­çš„ <code>PERSONA_FROM_MSC_PROMPT</code><br>
                    <strong>Few-shot ç¤ºä¾‹</strong>ï¼š<code>prompt_examples/persona_generation_examples.json</code>
                </div>
            </div>

            <!-- Step 2: Events -->
            <div class="card">
                <h3><span class="icon">ğŸ“…</span> æ­¥éª¤ 2ï¼šäº‹ä»¶å›¾è°±ç”Ÿæˆ</h3>

                <div class="example-box">
                    <div class="example-title">ğŸ” å…·ä½“ä¾‹å­ï¼šæ ¹æ® Persona ç”Ÿæˆç”Ÿæ´»äº‹ä»¶</div>

                    <h4>è¾“å…¥ï¼šPersona + æ—¶é—´èŒƒå›´</h4>
                    <div class="prompt-box">
<span class="label">PROMPT</span>
æ ¹æ®ä»¥ä¸‹äººç‰©æè¿°ï¼Œç”Ÿæˆä» 2023å¹´1æœˆ åˆ° 2023å¹´10æœˆ æœŸé—´å¯èƒ½å‘ç”Ÿçš„ 15 ä¸ªç”Ÿæ´»äº‹ä»¶ã€‚
æ¯ä¸ªäº‹ä»¶éœ€è¦åŒ…å«ï¼šæ—¥æœŸã€äº‹ä»¶æè¿°ã€å­äº‹ä»¶ã€å› æœå…³ç³»ï¼ˆcaused_byï¼‰ã€‚

äººç‰©ï¼šMelanie, 35å²ï¼Œæœ‰ä¸¤ä¸ªå­©å­ï¼Œå–œæ¬¢ç»˜ç”»å’Œéœ²è¥...
                    </div>

                    <div class="transform-arrow">â¬‡ï¸ GPT ç”Ÿæˆ</div>

                    <h4>è¾“å‡ºï¼šäº‹ä»¶å›¾è°±ï¼ˆgraph å­—æ®µï¼‰</h4>
                    <div class="json-preview">
[
  {
    <span class="key">"id"</span>: <span class="number">1</span>,
    <span class="key">"date"</span>: <span class="string">"15 March, 2023"</span>,
    <span class="key">"event"</span>: <span class="string">"Melanie signs up for a local pottery class"</span>,
    <span class="key">"sub_event"</span>: <span class="string">"Melanie decides to explore new art forms beyond painting"</span>,
    <span class="key">"caused_by"</span>: [],
    <span class="key">"image"</span>: <span class="string">"pottery class registration"</span>
  },
  {
    <span class="key">"id"</span>: <span class="number">2</span>,
    <span class="key">"date"</span>: <span class="string">"2 April, 2023"</span>,
    <span class="key">"event"</span>: <span class="string">"Melanie takes her family camping at the beach"</span>,
    <span class="key">"sub_event"</span>: <span class="string">"The family enjoys a bonfire and stargazing"</span>,
    <span class="key">"caused_by"</span>: [],
    <span class="key">"image"</span>: <span class="string">"family beach camping"</span>
  },
  {
    <span class="key">"id"</span>: <span class="number">3</span>,
    <span class="key">"date"</span>: <span class="string">"20 May, 2023"</span>,
    <span class="key">"event"</span>: <span class="string">"Melanie finishes her first pottery project"</span>,
    <span class="key">"sub_event"</span>: <span class="string">"She makes a vase inspired by the beach camping trip"</span>,
    <span class="key">"caused_by"</span>: [<span class="number">1</span>, <span class="number">2</span>],  <span class="comment">// â† å› æœå…³ç³»ï¼</span>
    <span class="key">"image"</span>: <span class="string">"handmade pottery vase"</span>
  }
]
                    </div>
                </div>

                <div class="highlight-box warning">
                    <strong>æ³¨æ„ caused_by å­—æ®µ</strong>ï¼šäº‹ä»¶ 3 çš„çµæ„Ÿæ¥è‡ªäº‹ä»¶ 1ï¼ˆå­¦é™¶è‰ºï¼‰å’Œäº‹ä»¶ 2ï¼ˆæµ·æ»©éœ²è¥ï¼‰ï¼Œè¿™å°±æ˜¯"å› æœé“¾"ã€‚<br>
                    åœ¨ç”Ÿæˆå¯¹è¯æ—¶ï¼Œprompt ä¼šåŒ…å«è¿™äº›å› æœå…³ç³»ï¼Œè®©å¯¹è¯æ›´è¿è´¯ã€‚
                </div>
            </div>

            <!-- Step 3: Conversation -->
            <div class="card">
                <h3><span class="icon">ğŸ’¬</span> æ­¥éª¤ 3ï¼šé€è½®å¯¹è¯ç”Ÿæˆ</h3>

                <div class="example-box">
                    <div class="example-title">ğŸ” å…·ä½“ä¾‹å­ï¼šSession 3 çš„å¯¹è¯ç”Ÿæˆè¿‡ç¨‹</div>

                    <h4>Agent A (Melanie) ç”Ÿæˆç¬¬ä¸€å¥è¯çš„ Prompt</h4>
                    <div class="prompt-box" style="max-height: 250px; overflow-y: auto;">
<span class="label">AGENT_CONV_PROMPT_W_EVENTS</span>
ä½ æ˜¯ Melanieã€‚ä»¥ä¸‹æ˜¯ä½ çš„äººç‰©æè¿°ï¼š
"Melanie is a 35 year old mother of two who works part-time..."

ä½ æ­£åœ¨å’Œ Caroline èŠå¤©ã€‚ä¸Šæ¬¡èŠå¤©æ˜¯ 2023å¹´4æœˆ2æ—¥ã€‚
ä»Šå¤©æ˜¯ 2023å¹´5æœˆ21æ—¥ã€‚

<strong>ã€ä¸Šæ¬¡èŠå¤©æ‘˜è¦ã€‘</strong>
ä½ ä»¬è®¨è®ºäº† Melanie çš„æµ·æ»©éœ²è¥ä¹‹æ—…ï¼ŒCaroline åˆ†äº«äº†å¥¹å‚åŠ  LGBTQ æ”¯æŒå°ç»„çš„ç»å†ã€‚

<strong>ã€ä½ æœ€è¿‘å‘ç”Ÿçš„äº‹ä»¶ã€‘</strong>
On 20 May, 2023, Melanie finishes her first pottery project.
Because previously, Melanie signs up for a local pottery class (15 March, 2023),
The family enjoys a bonfire and stargazing (2 April, 2023).

è¯·ä»¥ Melanie çš„èº«ä»½å¼€å§‹å¯¹è¯ã€‚å¦‚æœæƒ³åˆ†äº«ç…§ç‰‡ï¼Œä½¿ç”¨ [SHARES photo of ...]ã€‚

Melanie:
                    </div>

                    <div class="transform-arrow">â¬‡ï¸ GPT ç”Ÿæˆ</div>

                    <h4>ç”Ÿæˆçš„å¯¹è¯ï¼ˆå¤šè½®ï¼‰</h4>
                    <div class="conversation">
                        <div class="timestamp">ğŸ“… Session 3 - 3:30 pm on 21 May, 2023</div>

                        <div class="turn speaker-a">
                            <div class="speaker-name">Melanie (Agent A)</div>
                            Hey Caroline! Guess what? I finally finished my first pottery piece! ğŸ¨
                            <div class="image-share">
                                ğŸ“· [SHARES photo of handmade pottery vase]<br>
                                â†’ è§¦å‘å›¾ç‰‡æ£€ç´¢ + BLIP caption
                            </div>
                        </div>

                        <div class="turn speaker-b">
                            <div class="speaker-name">Caroline (Agent B)</div>
                            Wow that looks amazing! Is that the vase you mentioned you were working on? The colors remind me of the ocean!
                        </div>

                        <div class="turn speaker-a">
                            <div class="speaker-name">Melanie</div>
                            Yes! I was inspired by our beach camping trip. The blue glaze is meant to capture the sunset we saw that night.
                        </div>

                        <div class="turn speaker-b">
                            <div class="speaker-name">Caroline</div>
                            That's so thoughtful! Speaking of meaningful activities, I've been volunteering at the youth center lately...
                        </div>
                    </div>
                </div>

                <div class="highlight-box success">
                    <strong>å…³é”®ç‚¹</strong>ï¼š
                    <ul style="margin-top: 8px; padding-left: 20px;">
                        <li>æ¯è½®ç”Ÿæˆæ—¶ï¼Œprompt åŒ…å«ï¼špersona + å†å²æ‘˜è¦ + ç›¸å…³äº‹ä»¶ + å¯¹è¯ä¸Šæ–‡</li>
                        <li>äº‹ä»¶çš„<strong>å› æœå…³ç³»</strong>è¢«è‡ªç„¶åœ°èå…¥å¯¹è¯ï¼ˆ"inspired by our beach camping trip"ï¼‰</li>
                        <li><code>[SHARES photo of ...]</code> æ ‡è®°è§¦å‘åç»­å›¾ç‰‡å¤„ç†</li>
                    </ul>
                </div>
            </div>

            <!-- Step 4: Image -->
            <div class="card">
                <h3><span class="icon">ğŸ–¼ï¸</span> æ­¥éª¤ 4ï¼šå›¾ç‰‡æ£€ç´¢ä¸ Caption ç”Ÿæˆ</h3>

                <div class="example-box">
                    <div class="example-title">ğŸ” å…·ä½“ä¾‹å­ï¼šå¤„ç† "[SHARES photo of handmade pottery vase]"</div>

                    <div class="flow-diagram" style="background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);">
                        <div class="flow-row">
                            <div class="flow-box input">[SHARES photo of<br>handmade pottery vase]</div>
                            <span class="flow-arrow">â†’</span>
                            <div class="flow-box process">get_image_queries()<br><small>GPT è½¬æ¢</small></div>
                            <span class="flow-arrow">â†’</span>
                            <div class="flow-box output">æœç´¢ Query<br><small>"ceramic vase blue glaze"</small></div>
                        </div>
                        <div style="text-align: center;"><span class="flow-arrow" style="transform: rotate(90deg);">â†“</span></div>
                        <div class="flow-row">
                            <div class="flow-box output">æœç´¢ Query</div>
                            <span class="flow-arrow">â†’</span>
                            <div class="flow-box process">icrawler<br><small>Google å›¾ç‰‡çˆ¬å–</small></div>
                            <span class="flow-arrow">â†’</span>
                            <div class="flow-box output">å›¾ç‰‡æ–‡ä»¶<br><small>session_3/a/vase_001.jpg</small></div>
                        </div>
                        <div style="text-align: center;"><span class="flow-arrow" style="transform: rotate(90deg);">â†“</span></div>
                        <div class="flow-row">
                            <div class="flow-box output">å›¾ç‰‡æ–‡ä»¶</div>
                            <span class="flow-arrow">â†’</span>
                            <div class="flow-box process">BLIP æ¨¡å‹<br><small>get_blip_caption()</small></div>
                            <span class="flow-arrow">â†’</span>
                            <div class="flow-box output">Caption æ–‡æœ¬<br><small>"a photo of a blue ceramic..."</small></div>
                        </div>
                    </div>

                    <h4>æœ€ç»ˆå­˜å‚¨çš„ turn æ•°æ®</h4>
                    <div class="json-preview">
{
  <span class="key">"speaker"</span>: <span class="string">"Melanie"</span>,
  <span class="key">"text"</span>: <span class="string">"Hey Caroline! Guess what? I finally finished my first pottery piece!"</span>,
  <span class="key">"dia_id"</span>: <span class="string">"D3:1"</span>,
  <span class="key">"img_url"</span>: [<span class="string">"https://example.com/vase.jpg"</span>],
  <span class="key">"img_file"</span>: [<span class="string">"vase_001.jpg"</span>],
  <span class="key">"query"</span>: <span class="string">"ceramic vase blue glaze"</span>,
  <span class="key">"blip_caption"</span>: <span class="string">"a photo of a blue ceramic vase with ocean-inspired patterns"</span>
}
                    </div>
                </div>
            </div>
        </section>

        <!-- Intermediate Products Section -->
        <section id="intermediate">
            <div class="section-header">
                <div class="section-number">2</div>
                <h2>ä¸­é—´äº§ç‰©ï¼šRAG æ£€ç´¢æ•°æ®åº“</h2>
            </div>

            <div class="highlight-box warning">
                <strong>âš ï¸ ä¸ºä»€ä¹ˆéœ€è¦è¿™äº›ä¸­é—´äº§ç‰©ï¼Ÿ</strong><br>
                å¯¹è¯å¯èƒ½å¾ˆé•¿ï¼ˆ10ä¸‡+ tokensï¼‰ï¼Œè¶…è¿‡æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£ã€‚RAG é€šè¿‡æ£€ç´¢ç›¸å…³ç‰‡æ®µæ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚
            </div>

            <div class="card">
                <h3><span class="icon">ğŸ”„</span> ä¸‰ç§ RAG æ•°æ®åº“å¯¹æ¯”</h3>

                <table>
                    <thead>
                        <tr>
                            <th>æ•°æ®åº“</th>
                            <th>ç²’åº¦</th>
                            <th>å†…å®¹ç¤ºä¾‹</th>
                            <th>ç”Ÿæˆè„šæœ¬</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge blue">Dialog</span></td>
                            <td>æ¯ä¸ª turn</td>
                            <td>"Melanie said, 'I finished my pottery!' and shared a photo of a blue vase"</td>
                            <td>è¿è¡Œæ—¶ç°åœºç”Ÿæˆ</td>
                        </tr>
                        <tr>
                            <td><span class="badge green">Observation</span></td>
                            <td>æŠ½å–çš„äº‹å®</td>
                            <td>"Melanie finished her first pottery project on May 20, 2023"</td>
                            <td><code>generate_observations.sh</code></td>
                        </tr>
                        <tr>
                            <td><span class="badge yellow">Summary</span></td>
                            <td>æ¯ä¸ª session</td>
                            <td>"In session 3, Melanie shared her pottery project inspired by camping..."</td>
                            <td><code>generate_session_summaries.sh</code></td>
                        </tr>
                    </tbody>
                </table>

                <div class="example-box">
                    <div class="example-title">ğŸ” åŒä¸€æ®µå¯¹è¯åœ¨ä¸‰ç§åº“ä¸­çš„è¡¨ç¤º</div>

                    <h4>åŸå§‹å¯¹è¯ (Session 3, Turn 1)</h4>
                    <div class="conversation" style="margin: 8px 0;">
                        <div class="turn speaker-a">
                            <div class="speaker-name">Melanie</div>
                            Hey Caroline! I finally finished my first pottery piece! It's a vase inspired by our beach trip.
                            <div class="image-share">ğŸ“· shared: a photo of a blue ceramic vase</div>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 16px;">
                        <div style="background: #dbeafe; padding: 12px; border-radius: 8px;">
                            <strong style="color: #1e40af;">Dialog åº“</strong>
                            <p style="font-size: 0.85rem; margin-top: 8px;">"(3:30 pm on 21 May, 2023) Melanie said, 'Hey Caroline! I finally finished my first pottery piece!' and shared a photo of a blue ceramic vase"</p>
                        </div>
                        <div style="background: #d1fae5; padding: 12px; border-radius: 8px;">
                            <strong style="color: #065f46;">Observation åº“</strong>
                            <p style="font-size: 0.85rem; margin-top: 8px;">"Melanie completed her first pottery project - a vase" [D3:1]</p>
                            <p style="font-size: 0.85rem;">"Melanie's vase was inspired by a beach trip" [D3:1]</p>
                        </div>
                        <div style="background: #fef3c7; padding: 12px; border-radius: 8px;">
                            <strong style="color: #92400e;">Summary åº“</strong>
                            <p style="font-size: 0.85rem; margin-top: 8px;">"Session 3: Melanie excitedly shared her first pottery creation with Caroline, a blue vase inspired by their earlier beach camping discussion..."</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Evaluation Section -->
        <section id="evaluation">
            <div class="section-header">
                <div class="section-number">3</div>
                <h2>æµ‹è¯„æµç¨‹</h2>
            </div>

            <div class="card">
                <h3><span class="icon">ğŸ“Š</span> ä¸¤ç§æµ‹è¯„æ¨¡å¼å¯¹æ¯”</h3>

                <div class="grid-2">
                    <div style="background: #eff6ff; padding: 20px; border-radius: 12px;">
                        <h4 style="color: #1e40af; margin-bottom: 12px;">ğŸ“‹ çº¯ä¸Šä¸‹æ–‡ QA</h4>
                        <p><strong>åŸç†</strong>ï¼šæŠŠå°½å¯èƒ½å¤šçš„å¯¹è¯å¡è¿› prompt</p>
                        <p><strong>é™åˆ¶</strong>ï¼šå—æ¨¡å‹ä¸Šä¸‹æ–‡çª—å£é™åˆ¶</p>
                        <p><strong>è„šæœ¬</strong>ï¼š<code>evaluate_gpts.sh</code></p>
                        <div class="code-block" style="margin-top: 12px;">
å¯¹è¯å†…å®¹ï¼ˆä»å°¾éƒ¨æˆªæ–­åˆ° 4K/8K/16K tokensï¼‰
+ QA_PROMPT
+ é—®é¢˜
â†’ æ¨¡å‹å›ç­”
                        </div>
                    </div>
                    <div style="background: #ecfdf5; padding: 20px; border-radius: 12px;">
                        <h4 style="color: #065f46; margin-bottom: 12px;">ğŸ” RAG å¢å¼º QA</h4>
                        <p><strong>åŸç†</strong>ï¼šå…ˆæ£€ç´¢ç›¸å…³ç‰‡æ®µï¼Œå†å›ç­”</p>
                        <p><strong>ä¼˜åŠ¿</strong>ï¼šå¯å¤„ç†è¶…é•¿å¯¹è¯</p>
                        <p><strong>è„šæœ¬</strong>ï¼š<code>evaluate_rag_gpts.sh</code></p>
                        <div class="code-block" style="margin-top: 12px;">
é—®é¢˜ â†’ å‘é‡åŒ– â†’ æ£€ç´¢ top-k
â†’ æ‹¼æ¥æ£€ç´¢ç»“æœ + é—®é¢˜
â†’ æ¨¡å‹å›ç­”
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Evaluation Examples -->
        <section id="eval-example">
            <div class="section-header">
                <div class="section-number">ğŸ“</div>
                <h2>æµ‹è¯„å…·ä½“ç¤ºä¾‹</h2>
            </div>

            <!-- Pure Context QA Example -->
            <div class="card">
                <h3><span class="icon">ğŸ“‹</span> ç¤ºä¾‹ 1ï¼šçº¯ä¸Šä¸‹æ–‡ QA æµ‹è¯„</h3>

                <div class="example-box">
                    <div class="example-title">ğŸ” é—®é¢˜ï¼š"What activities does Melanie partake in?"</div>

                    <h4>Step 1: æ„å»ºè¾“å…¥ Prompt</h4>
                    <div class="prompt-box" style="max-height: 300px; overflow-y: auto;">
<span class="label">å‘é€ç»™æ¨¡å‹çš„ PROMPT</span>
Below is a conversation between two people: Melanie and Caroline.
The conversation takes place over multiple days.

<strong>DATE: 3:30 pm on 8 May, 2023</strong>
CONVERSATION:
Melanie said, "I love painting landscapes in my free time"
Caroline said, "That's wonderful! Do you have any other hobbies?"
Melanie said, "Yes! I also enjoy camping with my family. We went to the beach last month"
<strong>and shared a photo of a sunset over the ocean.</strong>  â† å›¾ç‰‡å˜æˆæ–‡å­—
...

<strong>DATE: 2:15 pm on 21 May, 2023</strong>
CONVERSATION:
Melanie said, "I just finished my first pottery project!"
...

<strong>DATE: 4:00 pm on 15 July, 2023</strong>
CONVERSATION:
Melanie said, "The kids and I went swimming at the lake yesterday"
...

<strong>(å¯¹è¯è¢«æˆªæ–­ä»¥é€‚åº”æ¨¡å‹çš„ä¸Šä¸‹æ–‡çª—å£)</strong>

---
Based on the above context, write an answer in the form of a short phrase.
Question: What activities does Melanie partake in? Short answer:
                    </div>

                    <h4>Step 2: æ¨¡å‹è¾“å‡º</h4>
                    <div class="result-box">
                        <span class="label">GPT-4 å›ç­”</span>
                        <p style="font-size: 1.1rem; margin-top: 8px;"><strong>"painting, camping, pottery, swimming"</strong></p>
                    </div>

                    <h4>Step 3: è®¡ç®— F1 Score</h4>
                    <div class="calc-steps">
                        <div class="step">
                            <span class="step-num">1</span>
                            <div>
                                <strong>æ ‡å‡†ç­”æ¡ˆ</strong>: "pottery, camping, painting, swimming"<br>
                                <strong>æ¨¡å‹é¢„æµ‹</strong>: "painting, camping, pottery, swimming"
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-num">2</span>
                            <div>
                                <strong>æ ‡å‡†åŒ– + è¯å¹²åŒ–</strong>:<br>
                                ç­”æ¡ˆ tokens: [potteri, camp, paint, swim]<br>
                                é¢„æµ‹ tokens: [paint, camp, potteri, swim]
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-num">3</span>
                            <div>
                                <strong>è®¡ç®—é‡å </strong>: 4 ä¸ªè¯å…¨éƒ¨åŒ¹é…<br>
                                Precision = 4/4 = 1.0, Recall = 4/4 = 1.0<br>
                                <strong style="color: #059669;">F1 = 1.0 âœ“</strong>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- RAG QA Example -->
            <div class="card">
                <h3><span class="icon">ğŸ”</span> ç¤ºä¾‹ 2ï¼šRAG å¢å¼º QA æµ‹è¯„</h3>

                <div class="example-box">
                    <div class="example-title">ğŸ” é—®é¢˜ï¼š"When did Melanie finish her pottery project?"</div>

                    <h4>Step 1: é—®é¢˜å‘é‡åŒ– + æ£€ç´¢</h4>
                    <div class="retrieval-viz">
                        <div class="query">
                            <strong>Query:</strong> "When did Melanie finish her pottery project?"<br>
                            <small>â†’ DRAGON encoder â†’ query_vector [768 dims]</small>
                        </div>
                        <p style="margin: 12px 0; font-weight: 600;">Top-5 æ£€ç´¢ç»“æœ (æŒ‰ç›¸ä¼¼åº¦æ’åº):</p>
                        <div class="results">
                            <div class="result-item hit">
                                <span class="rank">1</span>
                                <span>"(21 May, 2023) Melanie said, 'I just finished my first pottery project!'" <strong>[D3:1]</strong></span>
                                <span class="score">0.89</span>
                            </div>
                            <div class="result-item">
                                <span class="rank">2</span>
                                <span>"(15 March, 2023) Melanie said, 'I signed up for a pottery class today'" [D1:5]</span>
                                <span class="score">0.76</span>
                            </div>
                            <div class="result-item">
                                <span class="rank">3</span>
                                <span>"(21 May, 2023) Caroline said, 'The colors remind me of the ocean!'" [D3:2]</span>
                                <span class="score">0.65</span>
                            </div>
                            <div class="result-item">
                                <span class="rank">4</span>
                                <span>"(2 April, 2023) Melanie said, 'We went camping at the beach'" [D2:1]</span>
                                <span class="score">0.52</span>
                            </div>
                            <div class="result-item">
                                <span class="rank">5</span>
                                <span>"(15 July, 2023) Melanie said, 'The pottery class is going great'" [D5:3]</span>
                                <span class="score">0.48</span>
                            </div>
                        </div>
                    </div>

                    <h4>Step 2: æ„å»º RAG Prompt</h4>
                    <div class="prompt-box">
<span class="label">å‘é€ç»™æ¨¡å‹çš„ PROMPT (RAG æ¨¡å¼)</span>
<strong>Retrieved context:</strong>
21 May, 2023: Melanie said, "I just finished my first pottery project!"
15 March, 2023: Melanie said, "I signed up for a pottery class today"
21 May, 2023: Caroline said, "The colors remind me of the ocean!"
2 April, 2023: Melanie said, "We went camping at the beach"
15 July, 2023: Melanie said, "The pottery class is going great"

---
Based on the above context, write an answer in the form of a short phrase.
Question: When did Melanie finish her pottery project? Short answer:
                    </div>

                    <h4>Step 3: æ¨¡å‹å›ç­” + è¯„ä¼°</h4>
                    <div class="grid-2">
                        <div class="result-box">
                            <span class="label">æ¨¡å‹å›ç­”</span>
                            <p style="font-size: 1.1rem; margin-top: 8px;"><strong>"21 May, 2023"</strong></p>
                        </div>
                        <div class="calc-steps">
                            <div class="step">
                                <span class="step-num">F1</span>
                                <div>
                                    ç­”æ¡ˆ: "20 May 2023" vs é¢„æµ‹: "21 May 2023"<br>
                                    <strong style="color: #f59e0b;">F1 = 0.67</strong> (æ—¥æœŸå·®1å¤©)
                                </div>
                            </div>
                            <div class="step">
                                <span class="step-num">Recall</span>
                                <div>
                                    Evidence: [D3:1]<br>
                                    æ£€ç´¢åˆ°: [D3:1, D1:5, D3:2, D2:1, D5:3]<br>
                                    <strong style="color: #059669;">Recall = 1/1 = 1.0 âœ“</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Category 5 Example -->
            <div class="card">
                <h3><span class="icon">âš ï¸</span> ç¤ºä¾‹ 3ï¼šå¯¹æŠ—æ€§é—®é¢˜ (Category 5)</h3>

                <div class="example-box">
                    <div class="example-title">ğŸ” é—®é¢˜ï¼šæµ‹è¯•æ¨¡å‹æ˜¯å¦ä¼š"ç¼–é€ "ä¸å­˜åœ¨çš„ä¿¡æ¯</div>

                    <h4>é—®é¢˜è®¾è®¡</h4>
                    <div class="prompt-box">
<span class="label">å¯¹æŠ—æ€§é—®é¢˜</span>
Question: What is Melanie's favorite restaurant?

Select the correct answer:
(a) Not mentioned in the conversation
(b) The Italian Bistro on Main Street
                    </div>

                    <div class="highlight-box warning">
                        <strong>å…³é”®ç‚¹</strong>ï¼šå¯¹è¯ä¸­<strong>ä»æœªæåˆ°</strong>é¤å…ç›¸å…³ä¿¡æ¯ã€‚æ­£ç¡®ç­”æ¡ˆæ˜¯ (a)ã€‚
                    </div>

                    <h4>è¯„ä¼°é€»è¾‘</h4>
                    <div class="calc-steps">
                        <div class="step">
                            <span class="step-num">âœ“</span>
                            <div>
                                å¦‚æœæ¨¡å‹å›ç­”åŒ…å« "not mentioned" æˆ– "no information"<br>
                                <strong style="color: #059669;">Score = 1 (æ­£ç¡®è¯†åˆ«æ— æ³•å›ç­”)</strong>
                            </div>
                        </div>
                        <div class="step">
                            <span class="step-num">âœ—</span>
                            <div>
                                å¦‚æœæ¨¡å‹å›ç­” "The Italian Bistro" æˆ–ç¼–é€ å…¶ä»–ç­”æ¡ˆ<br>
                                <strong style="color: #ef4444;">Score = 0 (å¹»è§‰/ç¼–é€ )</strong>
                            </div>
                        </div>
                    </div>

                    <div class="code-block">
<span class="comment"># task_eval/evaluation.py:217-221</span>
<span class="keyword">if</span> line[<span class="string">'category'</span>] == <span class="number">5</span>:
    <span class="keyword">if</span> <span class="string">'no information available'</span> <span class="keyword">in</span> output.lower() \
       <span class="keyword">or</span> <span class="string">'not mentioned'</span> <span class="keyword">in</span> output.lower():
        all_ems.append(<span class="number">1</span>)  <span class="comment"># æ­£ç¡®</span>
    <span class="keyword">else</span>:
        all_ems.append(<span class="number">0</span>)  <span class="comment"># é”™è¯¯ï¼ˆå¹»è§‰ï¼‰</span>
                    </div>
                </div>
            </div>

            <!-- Multi-hop Example -->
            <div class="card">
                <h3><span class="icon">ğŸ”—</span> ç¤ºä¾‹ 4ï¼šå¤šè·³æ¨ç†é—®é¢˜ (Category 1)</h3>

                <div class="example-box">
                    <div class="example-title">ğŸ” é—®é¢˜ï¼šéœ€è¦ç»¼åˆå¤šå¤„ä¿¡æ¯æ‰èƒ½å›ç­”</div>

                    <h4>é—®é¢˜</h4>
                    <p style="font-size: 1.1rem; background: #f3f4f6; padding: 12px; border-radius: 8px;">
                        "Where has Melanie camped?"
                    </p>

                    <h4>éœ€è¦çš„ Evidenceï¼ˆåˆ†å¸ƒåœ¨ä¸åŒ sessionï¼‰</h4>
                    <div class="conversation">
                        <div class="timestamp">ğŸ“… Session 2 (D2:1)</div>
                        <div class="turn speaker-a">
                            <div class="speaker-name">Melanie</div>
                            We just got back from camping at the <strong>beach</strong>! The kids loved it.
                        </div>

                        <div class="timestamp">ğŸ“… Session 4 (D4:6)</div>
                        <div class="turn speaker-a">
                            <div class="speaker-name">Melanie</div>
                            Last summer we camped in the <strong>mountains</strong>. The views were incredible!
                        </div>

                        <div class="timestamp">ğŸ“… Session 8 (D8:32)</div>
                        <div class="turn speaker-a">
                            <div class="speaker-name">Melanie</div>
                            This time we tried camping in the <strong>forest</strong>. Very peaceful.
                        </div>
                    </div>

                    <h4>æ ‡å‡†ç­”æ¡ˆ vs é¢„æµ‹</h4>
                    <div class="grid-2">
                        <div>
                            <p><strong>æ ‡å‡†ç­”æ¡ˆ</strong>: "beach, mountains, forest"</p>
                            <p><strong>æ¨¡å‹é¢„æµ‹</strong>: "beach, mountains"</p>
                        </div>
                        <div class="calc-steps">
                            <div class="step">
                                <span class="step-num">1</span>
                                <div>æŒ‰é€—å·åˆ†å‰²æˆå­ç­”æ¡ˆ</div>
                            </div>
                            <div class="step">
                                <span class="step-num">2</span>
                                <div>
                                    å¯¹æ¯ä¸ª ground truth è®¡ç®—æœ€ä½³åŒ¹é… F1:<br>
                                    "beach" â†’ max(F1(beach, beach), F1(beach, mountains)) = 1.0<br>
                                    "mountains" â†’ 1.0<br>
                                    "forest" â†’ 0.0 (é¢„æµ‹ä¸­æ²¡æœ‰)
                                </div>
                            </div>
                            <div class="step">
                                <span class="step-num">3</span>
                                <div>
                                    æœ€ç»ˆ F1 = mean(1.0, 1.0, 0.0) = <strong style="color: #f59e0b;">0.67</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Metrics Section -->
        <section id="metrics">
            <div class="section-header">
                <div class="section-number">4</div>
                <h2>æŒ‡æ ‡è®¡ç®—æ±‡æ€»</h2>
            </div>

            <div class="card">
                <h3><span class="icon">ğŸ“Š</span> 5 ç§é—®é¢˜ç±»åˆ«çš„è¯„ä¼°æ–¹å¼</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Category</th>
                            <th>ç±»å‹</th>
                            <th>ç¤ºä¾‹é—®é¢˜</th>
                            <th>è¯„ä¼°æ–¹å¼</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><span class="badge blue">1</span></td>
                            <td>å•è·³/å¤šè·³</td>
                            <td>"What activities does Melanie partake in?"</td>
                            <td>æŒ‰é€—å·åˆ†å‰²ï¼Œè®¡ç®—å±€éƒ¨ F1 å¹³å‡</td>
                        </tr>
                        <tr>
                            <td><span class="badge green">2</span></td>
                            <td>æ—¶åºæ¨ç†</td>
                            <td>"When did Melanie finish her pottery?"</td>
                            <td>Token-stem F1</td>
                        </tr>
                        <tr>
                            <td><span class="badge yellow">3</span></td>
                            <td>å¼€æ”¾åŸŸæ¨ç†</td>
                            <td>"Would Melanie enjoy a museum trip?"</td>
                            <td>Token-stem F1</td>
                        </tr>
                        <tr>
                            <td><span class="badge purple">4</span></td>
                            <td>å¼€æ”¾åŸŸ</td>
                            <td>ä¸€èˆ¬æ€§é—®é¢˜</td>
                            <td>Token-stem F1</td>
                        </tr>
                        <tr>
                            <td><span class="badge red">5</span></td>
                            <td>å¯¹æŠ—æ€§</td>
                            <td>"What is Melanie's favorite restaurant?"</td>
                            <td>è¾“å‡ºå« "not mentioned" â†’ 1ï¼Œå¦åˆ™ â†’ 0</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <h3><span class="icon">ğŸ“</span> è¾“å‡ºæ–‡ä»¶è¯´æ˜</h3>

                <div class="example-box">
                    <div class="example-title">ğŸ” è¯„ä¼°åç”Ÿæˆçš„æ–‡ä»¶</div>

                    <h4>1. locomo10_qa.json - æ¯æ¡ QA çš„è¯¦ç»†ç»“æœ</h4>
                    <div class="json-preview">
{
  <span class="key">"sample_id"</span>: <span class="string">"sample_001"</span>,
  <span class="key">"qa"</span>: [
    {
      <span class="key">"question"</span>: <span class="string">"What activities does Melanie partake in?"</span>,
      <span class="key">"answer"</span>: <span class="string">"pottery, camping, painting, swimming"</span>,
      <span class="key">"category"</span>: <span class="number">1</span>,
      <span class="key">"evidence"</span>: [<span class="string">"D5:4"</span>, <span class="string">"D9:1"</span>, <span class="string">"D1:12"</span>, <span class="string">"D1:18"</span>],
      <span class="key">"gpt-4-turbo_prediction"</span>: <span class="string">"painting, camping, pottery, swimming"</span>,
      <span class="key">"gpt-4-turbo_f1"</span>: <span class="number">1.0</span>
    },
    {
      <span class="key">"question"</span>: <span class="string">"When did Melanie finish her pottery?"</span>,
      <span class="key">"gpt-3.5-turbo_dialog_top_5_prediction"</span>: <span class="string">"21 May, 2023"</span>,
      <span class="key">"gpt-3.5-turbo_dialog_top_5_f1"</span>: <span class="number">0.67</span>,
      <span class="key">"gpt-3.5-turbo_dialog_top_5_recall"</span>: <span class="number">1.0</span>
    }
  ]
}
                    </div>

                    <h4>2. locomo10_qa_stats.json - èšåˆç»Ÿè®¡</h4>
                    <div class="json-preview">
{
  <span class="key">"model"</span>: <span class="string">"gpt-4-turbo"</span>,
  <span class="key">"overall_f1"</span>: <span class="number">0.72</span>,
  <span class="key">"category_1_f1"</span>: <span class="number">0.68</span>,
  <span class="key">"category_2_f1"</span>: <span class="number">0.75</span>,
  <span class="key">"category_3_f1"</span>: <span class="number">0.71</span>,
  <span class="key">"category_4_f1"</span>: <span class="number">0.69</span>,
  <span class="key">"category_5_f1"</span>: <span class="number">0.82</span>,
  <span class="key">"total_questions"</span>: <span class="number">420</span>
}
                    </div>
                </div>
            </div>
        </section>

        <!-- Quick Reference -->
        <section>
            <div class="section-header">
                <div class="section-number">âš¡</div>
                <h2>å¿«é€Ÿå‚è€ƒ</h2>
            </div>

            <div class="card">
                <h3><span class="icon">ğŸš€</span> å¸¸ç”¨å‘½ä»¤é€ŸæŸ¥</h3>
                <table>
                    <thead>
                        <tr>
                            <th>ç›®çš„</th>
                            <th>å‘½ä»¤</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>é…ç½® API å¯†é’¥</td>
                            <td><code>vim scripts/env.sh</code></td>
                        </tr>
                        <tr>
                            <td>ç”Ÿæˆæ–°å¯¹è¯</td>
                            <td><code>bash scripts/generate_conversations.sh</code></td>
                        </tr>
                        <tr>
                            <td>æµ‹è¯• GPT-4</td>
                            <td><code>bash scripts/evaluate_gpts.sh</code></td>
                        </tr>
                        <tr>
                            <td>æµ‹è¯• Claude</td>
                            <td><code>bash scripts/evaluate_claude.sh</code></td>
                        </tr>
                        <tr>
                            <td>RAG æµ‹è¯„</td>
                            <td><code>bash scripts/evaluate_rag_gpts.sh</code></td>
                        </tr>
                        <tr>
                            <td>ç”Ÿæˆ Observation åº“</td>
                            <td><code>bash scripts/generate_observations.sh</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="card">
                <h3><span class="icon">ğŸ“</span> å…³é”®æ–‡ä»¶è·¯å¾„</h3>
                <div class="file-tree">
<span class="folder">locomo/</span>
â”œâ”€â”€ <span class="folder">data/</span>
â”‚   â”œâ”€â”€ <span class="file">locomo10.json</span>          <span class="desc">â† åŸºå‡†æ•°æ®é›†ï¼ˆç›´æ¥ç”¨äºæµ‹è¯„ï¼‰</span>
â”‚   â””â”€â”€ <span class="file">msc_personas_all.json</span>  <span class="desc">â† äººæ ¼é‡‡æ ·æºï¼ˆç”¨äºç”Ÿæˆæ–°æ•°æ®ï¼‰</span>
â”œâ”€â”€ <span class="folder">generative_agents/</span>         <span class="desc">â† æ•°æ®ç”Ÿæˆæ¨¡å—</span>
â”‚   â””â”€â”€ <span class="file">generate_conversations.py</span>
â”œâ”€â”€ <span class="folder">task_eval/</span>                  <span class="desc">â† æµ‹è¯„æ¨¡å—</span>
â”‚   â”œâ”€â”€ <span class="file">evaluate_qa.py</span>          <span class="desc">â† æµ‹è¯„ä¸»å…¥å£</span>
â”‚   â”œâ”€â”€ <span class="file">evaluation.py</span>           <span class="desc">â† æŒ‡æ ‡è®¡ç®—ï¼ˆF1 ç­‰ï¼‰</span>
â”‚   â””â”€â”€ <span class="file">*_utils.py</span>              <span class="desc">â† å„æ¨¡å‹é€‚é…å™¨</span>
â”œâ”€â”€ <span class="folder">scripts/</span>                    <span class="desc">â† Shell è„šæœ¬</span>
â”‚   â”œâ”€â”€ <span class="file">env.sh</span>                  <span class="desc">â† ç¯å¢ƒå˜é‡é…ç½®</span>
â”‚   â””â”€â”€ <span class="file">evaluate_*.sh</span>           <span class="desc">â† å„ç±»æµ‹è¯„è„šæœ¬</span>
â”œâ”€â”€ <span class="folder">prompt_examples/</span>            <span class="desc">â† Few-shot ç¤ºä¾‹</span>
â””â”€â”€ <span class="file">global_methods.py</span>           <span class="desc">â† LLM API å°è£…</span>
                </div>
            </div>
        </section>

        <footer style="text-align: center; padding: 40px 0; color: var(--text-muted);">
            <p>LoCoMo: Evaluating Very Long-Term Conversational Memory of LLM Agents</p>
            <p>ACL 2024 | <a href="https://github.com/snap-research/locomo" style="color: var(--primary);">GitHub Repository</a></p>
        </footer>
    </div>
</body>
</html>
